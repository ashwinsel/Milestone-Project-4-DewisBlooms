{% extends "base.html" %}

{% load static %}

{% block content %}
<div class="shopping-cart">
    <h2>Your Shopping Cart</h2>

    <!-- Check if there are items in the cart -->
    {% if cart_items %}
        <div class="cart-items">
            {% for item in cart_items %}
                <div class="cart-item">
                    <!-- Display the product image -->
                    <img src="{{ item.image }}" alt="{{ item.name }}" class="product-image">
                    
                    <!-- Product details such as name, price, quantity, and subtotal -->
                    <div class="product-details">
                        <h4>{{ item.name }}</h4>
                        <p>Price per item: £{{ item.price }}</p>
                        <p>Quantity: {{ item.quantity }}</p>
                        <p>Subtotal: £{{ item.subtotal }}</p>
                    </div>
                    
                    <!-- Remove item from cart form -->
                    <form action="{% url 'shopping_bag:remove_from_cart' item.id %}" method="post">
                        {% csrf_token %}
                        <button type="submit" class="remove-btn">Remove</button>
                    </form>                
                </div>
            {% endfor %}
        </div>

        <!-- Display total price for the cart -->
        <h3>Total: £{{ total }}</h3>

        <!-- Clear cart button -->
        <form action="{% url 'shopping_bag:clear_cart' %}" method="post">
            {% csrf_token %}
            <button type="submit" class="clear-btn">Clear Cart</button>
        </form>    

        <!-- Proceed to checkout button -->
        <a href="{% url 'checkout' %}" class="checkout-btn">Proceed to Checkout</a>
    {% else %}
        <!-- Display a message if the cart is empty -->
        <p>Your cart is empty. Go back to <a href="{% url 'products:product_list' %}">shop more</a>.</p>
    {% endif %}
</div>
{% endblock %}